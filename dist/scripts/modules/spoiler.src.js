import{elementIsExistWithLog as o}from"./general.js";export default class e{constructor(t){if(o("SpoilerMenu",t.btnsSelector,t.contentBlocksSelector))(t.maxWorkWidth<0||t.animationDuration<0)&&console.log("[SpoilerMenu] maxWorkWidth < 0 or animationDuration < 0!");else return;if(e.spoilerButtons=document.querySelectorAll(t.btnsSelector),e.spoilerContentElements=document.querySelectorAll(t.contentBlocksSelector),e.btnActiveClass=t.buttonActiveClass?t.buttonActiveClass:"active",e.contentActiveClass=t.contentActiveClass?t.contentActiveClass:"active",e.spoilerButtons.length!=e.spoilerContentElements.length){console.log("[SpoilerMenu] The count of buttons and content-elements is not equal!");return}e.spoilerVisibleWidth=t.maxWorkWidth,e.animationDuration=t.animationDuration,this.toggleToSpoilers(),window.addEventListener("resize",this.toggleToSpoilers)}toggleToSpoilers(){if(window.innerWidth<=e.spoilerVisibleWidth)for(let t=0;t<e.spoilerContentElements.length;t++)e.spoilerButtons[t].classList.contains(e.btnActiveClass)?(e.spoilerContentElements[t].style.removeProperty("height"),e.spoilerContentElements[t].style.height=e.spoilerContentElements[t].clientHeight+"px",e.spoilerContentElements[t].style.opacity="1",e.spoilerContentElements[t].style.pointerEvents="all"):(e.spoilerContentElements[t].style.height="0px",e.spoilerContentElements[t].style.opacity="0",e.spoilerContentElements[t].style.pointerEvents="none"),e.spoilerContentElements[t].style.overflow="hidden",e.spoilerButtons[t].addEventListener("click",e.toggleSpoilerState),e.spoilerButtons[t].style.cursor="pointer";else for(let t=0;t<e.spoilerContentElements.length;t++)e.spoilerContentElements[t].style.removeProperty("height"),e.spoilerContentElements[t].style.removeProperty("opacity"),e.spoilerContentElements[t].style.removeProperty("pointer-events"),e.spoilerContentElements[t].style.removeProperty("overflow"),e.spoilerButtons[t].removeEventListener("click",e.toggleSpoilerState),e.spoilerButtons[t].style.cursor="default"}static toggleSpoilerState(t){let n=t.currentTarget,l=n.nextElementSibling;l.classList.contains("_slide")===!1&&(a(l,e.animationDuration),n.classList.toggle(e.btnActiveClass),l.classList.toggle(e.contentActiveClass))}}function i(s){return s.classList.contains("_slide")?!1:(s.classList.add("_slide"),!0)}function c(s,t){i(s)!=!1&&(s.style.transitionProperty="height, opacity",s.style.transitionDuration=`${t}ms`,s.style.height="0px",s.style.opacity="0",s.style.pointerEvents="none",window.setTimeout(()=>{s.classList.remove("_slide")},t))}function r(s,t){if(i(s)==!1)return;let n=s.scrollHeight;s.style.transitionProperty="height, opacity",s.style.transitionDuration=`${t}ms`,s.style.height=`${n}px`,s.style.opacity="1",s.style.pointerEvents="all",window.setTimeout(()=>{s.classList.remove("_slide")},t)}function a(s,t){s.style.height=="0px"?r(s,t):c(s,t)}
